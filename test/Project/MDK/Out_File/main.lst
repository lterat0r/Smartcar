C251 COMPILER V5.60.0,  main                                                               10/04/23  08:48:14  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\Out_File\main.obj
COMPILER INVOKED BY: D:\MDK5\C251\BIN\C251.EXE ..\USER\src\main.c XSMALL INTR2 WARNINGLEVEL(3) BROWSE INCDIR(..\..\Libra
                    -ries\libraries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\CODE;..\USER\inc;..\USER\src) D
                    -EBUG PRINT(.\Out_File\main.lst) TABS(2) OBJECT(.\Out_File\main.obj) 

stmt  level    source

    1          /********************************************************************************************************
             -*************
    2           * ÒÔÏÂËùÓĞÄÚÈİ°æÈ¨¾ùÊôÖğ·É¿Æ¼¼ËùÓĞ£¬Î´¾­ÔÊĞí²»µÃÓÃÓÚÉÌÒµÓÃÍ¾£¬
    3           * »¶Ó­¸÷Î»Ê¹ÓÃ²¢´«²¥±¾³ÌĞò£¬ĞŞ¸ÄÄÚÈİÊ±±ØĞë±£ÁôÖğ·É¿Æ¼¼µÄ°æÈ¨ÉùÃ÷¡£
    4           *
    5           ********************************************************************************************************
             -************/
    6          /*****************************µÚÊ®Áù½ìÖÇÄÜ³µ×¨¿Æ×éËÄÂÖ*******************************
    7          Ê¹ÓÃĞ¾Æ¬£ºSTC16F40K128   £¨Ã»ÓĞÊ¹ÓÃÉãÏñÍ·£¬ÁúÇñ»òÕßÖğ·É³ÌĞò¶¼¼æÈİ£©
    8          ËµÃ÷£º
    9          ´´×÷£ºÄÇ¸ö»ì×Ó
   10          ÁªÏµQQ£º570656605 £¨±¸Ã÷À´Òâ£¬ÓĞÎÊÌâ¶¼¿ÉÁªÏµ£¡£©
   11          Ê±¼ä£º2021-5-27 
   12          ×îºóÒ»´ÎĞŞ¸Ä±¸×¢£º
   13          
   14          ¼ÓÓÍ£¬±¾³ÌĞò½öÎª´ó¼ÒÌá¹©Ò»Ğ©²Î¿¼°ïÖú£¬ÖúÁ¦Ğ¡°×¿ìËÙÉÏÊÖÖÇÄÜ³µÖÆ×÷£¡
   15               ¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡úÔ¤×£¸÷Î»ÔÚ±ÈÈüÖĞÈ¡µÃºÃ³É¼¨£¡¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û
   16               ¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú¡ú ×öÖÇÄÜ³µºó»ÚÒ»Äê£¬²»×öÖÇÄÜ³µºó»ÚÒ»±²×Ó¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û¡û
   17          
   18          **************************************************************************************/
   19          #include "headfile.h"//×ÜµÄÍ·ÎÄ¼ş
   20          /*
   21           *¹ØÓÚÄÚºËÆµÂÊµÄÉè¶¨£¬¿ÉÒÔ²é¿´board.hÎÄ¼ş
   22           *ÔÚboard_initÖĞ,ÒÑ¾­½«P54Òı½ÅÉèÖÃÎª¸´Î»
   23           *Èç¹ûĞèÒª
   24           Ê¹ÓÃP54Òı½Å,¿ÉÒÔÔÚboard.cÎÄ¼şÖĞµÄboard_init()º¯ÊıÖĞÉ¾³ıSET_P54_RESRT¼´¿É
   25           */
   26           
   27          //ËùÓĞµÄ³õÊ¼»¯º¯Êı  ±ØĞë×î¿ªÊ¼µ÷ÓÃÕâ¸ö
   28          void initialize()
   29          {
   30   1        DisableGlobalIRQ();   //¹Ø±Õ×ÜÖĞ¶Ï
   31   1        board_init();   //³õÊ¼»¯ÄÚ²¿¼Ä´æÆ÷£¬ÎğÉ¾³ı´Ë¾ä´úÂë¡£
   32   1        soft_delay(1000);//Èí¼şÉÔÎ¢ÑÓÊ±Ò»ÏÂ
   33   1        int_OK=0;//³õÊ¼»¯±êÖ¾Î»
   34   1        lcd_init(); //LCDÏÔÊ¾ÆÁÄ»³õÊ¼»¯
   35   1        //lcd_showstr(0,0,(unsigned char*)"µÚÊ®Æß½ìÖÇÄÜ³µËÄÂÖ");    //×Ö·û´®ÏÔÊ¾
   36   1        lcd_showstr(0,2,"interlize...");
   37   1        delay_ms(1000);
   38   1      
   39   1        Flag_Init();//½á¹¹Ìå±êÖ¾Î»³õÊ¼»¯
   40   1        Switch_Key_init();//°´¼ü²¦Âë¿ª¹Ø³õÊ¼»¯
   41   1        Strategy_Slect();//²¦Âë¿ª¹Ø²ßÂÔÑ¡Ôñ
   42   1        gpio_mode(BUZZ_Pin,GPO_PP);BUZZPin=0;       // ·äÃùÆ÷GPIO³õÊ¼»¯
   43   1        init_PWM(1);//µç»ú³õÊ¼»¯(ÄÚº¬Á½ÖÖÇı¶¯) 0µÄ»°ÊÇÁ½Â·Ä£Ê½MOSÇı¶¯£¬1µÄ»°ÊÇÒ»Â·Ä£Ê½DRVÇı¶¯
   44   1        encoder_init();//±àÂëÆ÷³õÊ¼»¯
   45   1        init_Steer_PWM();//¶æ»ú³õÊ¼»¯
   46   1        ADC_Int();//µç´ÅADC³õÊ¼»¯
   47   1        PID_Parameter_Init(&TurnPID);//×ªÏòPID½á¹¹Ìå³õÊ¼»¯
   48   1        PID_Parameter_Init(&SpeedPID);//ËÙ¶ÈPID½á¹¹Ìå³õÊ¼»¯
   49   1        uart_init(UART_User,UART_RX_Pin,UART_TX_Pin, 115200, TIM_4);  // ³õÊ¼»¯´®¿Ú ²¨ÌØÂÊ115200  ÕâÀïÊ¹ÓÃ¶¨Ê±Æ÷4
             -    
   50   1        BUZZ_DiDiDi(200);//·äÃùÆ÷µÎÒ»Éù
   51   1        delay_ms(50);
   52   1        exit_init(Reed_Switch_Pin,FALLING_EDGE); //³õÊ¼»¯ ×÷ÎªÍâ²¿ÖĞ¶ÏÒı½Å£¬ÏÂ½µÑØ´¥·¢¡££¨ÓÃÓÚÍ£³µ¸É»É¹Ü¼ì²â£¬È
             -ç¹ûÒı½ÅÖ»ÊÇÆÕÍ¨Òı½Å£¬²»ÄÜÊ¹ÓÃÍâ²¿ÖĞ¶Ï£©
   53   1        pit_timer_ms(TIM_1,5);   // Ê¹ÓÃ¶¨Ê±Æ÷×öÖÜÆÚÖĞ¶Ï£¬Ê±¼ä5msÒ»´Î¡£
C251 COMPILER V5.60.0,  main                                                               10/04/23  08:48:14  PAGE 2   

   54   1      
   55   1      
   56   1        EnableGlobalIRQ();  //¿ªÆô×ÜÖĞ¶Ï
   57   1      }
   58          /******Ö÷º¯Êı**************************/
   59          void main()
   60          {
   61   1        char txt[20];   
   62   1            initialize();//×ÜµÄ³õÊ¼»¯
   63   1        
   64   1        
   65   1        /****ÏÂÃæµÄ²âÊÔº¯ÊıÖ»ÊÇ²âÊÔÓÃ£¬²âÊÔ½áÊøÇë×¢ÊÍ¹Ø±Õ£¬Ò»´ÎÖ»ÔÊĞí¿ªÒ»¸ö²âÊÔº¯Êı£¡£¡******/
   66   1            //Test_Servo_Hardware();//²âÊÔ¶æ»úµ÷Öµ
   67   1           // Test_Motor_Hardware();//µ÷ÊÔµç»úÊ¹ÓÃ
   68   1            //Test_Electric_Hardware();//²âÊÔµç´Åµç¸Ğ²É¼¯
   69   1            Turn_Suquence = 3;//×ªÏòµÄPIDÑ¡Ôñ
   70   1            Set_Speed = 210;       //ËÙ¶ÈÉè¶¨290
   71   1            aim_speed = Set_Speed;//Îğ¹Ü£¬ÖĞ¼ä±äÁ¿¶øÒÑ
   72   1         
   73   1            lcd_showstr(0,2,"Ready OK! ");//Èç¹û³ÌĞò³õÊ¼»¯³É¹¦»áÏÔÊ¾
   74   1            //oled_fill(0x00);  //ÇåÆÁ
   75   1      
   76   1          while(1)
   77   1        {  
   78   2          //datasend();//´«ÊäÊı¾İµ½ÄäÃû¿Æ´´ÉÏÎ»»ú
   79   2          
   80   2          /*****ÏÔÊ¾5¸öµç¸ĞÖµ***********/
   81   2            sprintf(txt,"Mid_Adc= %05d",adc_date[4]); 
   82   2          lcd_showstr(1, 3, txt); //ÏÔÊ¾
   83   2            sprintf(txt,"Left_Adc= %05d",adc_date[0]);
   84   2          lcd_showstr(1, 4, txt); //ÏÔÊ¾
   85   2            sprintf(txt,"Right_Adc= %05d",adc_date[1]);
   86   2          lcd_showstr(1, 5, txt); //ÏÔÊ¾
   87   2           sprintf(txt,"Left_Xie= %05d",adc_date[2]);
   88   2          lcd_showstr(1, 6, txt); //ÏÔÊ¾
   89   2           sprintf(txt,"Right_Xie= %05d",adc_date[3]);
   90   2          lcd_showstr(1, 7, txt); //ÏÔÊ¾
   91   2      
   92   2      //===========================ÆäËû´¦Àí²Ù×÷================================================================
             -==========================================
   93   2      
   94   2                if(Flag.Game==0)  //³ö¿â×¼±¸£¨ÕâÀïÃæµÄÖ´ĞĞ³É¹¦ÁË³ÌĞò²Å»áÖ´ĞĞfuseÖĞ¶ÏÀïÃæµÄ£¡£©
   95   2                {
   96   3                    BUZZ_ON //·äÃùÆ÷Ïì
   97   3                   OutInGarage (0, LEFT_RIGHT); //  ³ö¿â   Ä¬ÈÏÓÒ
   98   3                    Flag.Game = 1;
   99   3                   lcd_showstr(0,2,"Out Garage OK!");//³ö¿â³É¹¦
  100   3                    BUZZ_OFF//¹Ø±Õ·äÃùÆ÷
  101   3                    int_OK=1;////³õÊ¼»¯Íê³É  Õâ¸ö±êÖ¾Î»³ÉÁ¢ÖĞ¶Ï·şÎñº¯ÊıÀïÃæµÄ²Å»áÖ´ĞĞµÄ
  102   3                    Flag.start_go = 1;//Æô¶¯  ³ö¿â³É¹¦²ÅÖ´ĞĞÖĞ¶ÏÀïÃæµÄ¶«Î÷
  103   3                }
  104   2      #if 1 //Èç¹ûµ÷ÊÔ³ÌĞòµÄ»°£¬²»ÈÃËûÊ¶±ğ³µ¿â£¬Çë°Ñ1¸ÄÎª0£¬²»ÈÃËû±àÒëÕâÀï³ÌĞò¼´¿É
  105   2                else if(Flag.Game==1)
  106   2                {
  107   3                STOP_Analyse ();//Í£³µÅĞ±ğ
  108   3                }
  109   2      #endif
  110   2      
  111   2      
  112   2         }
  113   1        
  114   1      }
  115          
*** WARNING C182 IN LINE 32 OF ..\USER\src\main.c: 'F14x16': unknown size, assumed to be 'extern'


C251 COMPILER V5.60.0,  main                                                               10/04/23  08:48:14  PAGE 3   

Module Information          Static   Overlayable
------------------------------------------------
  code size            =       461     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------         20
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =       115     ------
End of Module Information.


C251 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
